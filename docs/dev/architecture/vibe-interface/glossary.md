# VibeCopilot 术语表

本文档定义了 VibeCopilot 项目中使用的关键术语和概念，以确保理解一致。

## 核心概念

### 命令系统 (Command System)

**定义**：VibeCopilot 的命令处理架构，包括命令解析、路由和执行的完整流程。

**组成部分**：

- 命令处理器 (Command Handler)
- 命令解析器 (Command Parser)
- 命令类 (Command Classes)

### 规则 (Rule)

**定义**：定义特定行为、约束或指导原则的结构化文档，用于指导 AI 助手或系统的行为。

**特点**：

- 通常以 Markdown 格式 (.mdc) 存储在 `.cursor/rules/` 目录
- 包含元数据、指令和示例
- 由 Cursor Agent (AI 助手) 加载和遵循执行
- 规定了 AI 如何响应特定命令和如何调用底层接口

**作用**：

- 控制 AI 助手的行为模式
- 定义特定命令的处理方式
- 教会 AI 如何使用命令行接口

### 规则命令 (Rule-based Command)

**定义**：在 Cursor IDE 中使用的、以斜杠开头的自然语言交互命令（如 `/rule list`）。

**特点**：

- 由用户在 Cursor IDE 中输入
- 以斜杠 (/) 开头
- 由 Cursor Agent 通过规则系统解释和处理
- 支持自然语言交互和上下文理解

**作用**：

- 提供更直观的人机交互界面
- 允许 AI 助手根据上下文智能处理命令

### 命令行命令 (CLI Command)

**定义**：通过终端执行的、由 Python 代码实现的命令行接口（如 `vibecopilot rule list`）。

**特点**：

- 在终端中执行
- 由原生 Python 代码直接处理
- 严格的参数格式和语法
- 不涉及 AI 助手的交互

**作用**：

- 提供底层功能实现
- 支持脚本化和自动化操作
- 可被规则命令间接调用

### 规则模板 (Rule Template)

**定义**：用于生成规则的预定义结构，包含变量占位符和标准化格式。

**用途**：

- 确保规则格式一致性
- 简化规则创建过程
- 允许通过变量注入生成不同的规则实例

### 规则引擎 (Rule Engine)

**定义**：负责管理规则生命周期的系统组件，包括规则的扫描、解析、存储和生成。

**功能**：

- 扫描和加载已有规则文件
- 解析规则内容和结构
- 将规则存储到数据库
- 根据模板生成新规则文件

**作用**：

- 作为规则和命令之间的桥梁
- 使 AI 助手能够了解和使用命令行接口
- 标准化规则的创建和管理过程

## 命令开发流程与关系

开发一个完整的命令功能通常需要两个部分：

1. **命令行接口开发**：
   - 在 `src/cli/commands/` 目录下实现命令处理器
   - 注册命令到命令解析器
   - 实现具体的业务逻辑

2. **规则创建**：
   - 使用规则引擎和规则模板
   - 创建教会 Cursor Agent 如何使用命令的规则
   - 在规则中描述命令的使用方法、参数和示例

**关键关系**：

- 命令行接口提供基础功能，但 Cursor Agent 不知道如何使用它
- 规则教会 Cursor Agent 如何解释规则命令并调用对应的命令行接口
- 规则引擎帮助创建和管理这些规则

**流程说明**：

1. 开发命令行接口（可直接在终端使用）
2. 使用规则引擎生成规则（告诉 AI 如何使用该接口）
3. 用户在 Cursor IDE 中使用规则命令
4. Cursor Agent 根据规则识别命令并调用对应的命令行接口
5. 命令行接口执行操作并返回结果
6. Cursor Agent 根据规则格式化结果并回复用户

## 区分相似概念

### 规则命令 vs. 命令行命令

- **规则命令**：在 Cursor IDE 中输入的智能交互命令（如 `/rule list`）
- **命令行命令**：在终端中执行的原生命令（如 `vibecopilot rule list`）

### 规则 vs. 规则模板

- **规则**：最终应用于系统的实际指令文档，被 Cursor Agent 加载和遵循
- **规则模板**：用于生成规则的结构化模板文件，包含占位符

### 规则引擎 vs. 模板引擎

- **规则引擎**：负责规则的整体生命周期管理（扫描、解析、存储、生成）
- **模板引擎**：规则引擎的组件之一，专注于模板渲染和变量替换

## 文件和目录

### .cursor/rules/

**定义**：存储 Cursor Agent 行为规则的目录
**内容**：按照类别组织的 .mdc 规则文件

### src/cli/commands/

**定义**：存储命令行工具命令处理器的目录
**内容**：各种命令的 Python 实现

### src/templates/

**定义**：存储模板引擎和规则模板的目录
**内容**：规则模板和模板处理相关代码

### src/rule_engine/

**定义**：规则引擎的核心目录
**内容**：规则扫描、解析、存储和生成相关的代码

## 常见命令示例

### 规则命令 (在 Cursor IDE 中)

- `/rule list` - 列出所有规则
- `/task create "完成文档"` - 创建新任务
- `/check status` - 检查项目状态

### 命令行命令 (在终端中)

- `vibecopilot rule list` - 列出所有规则
- `vibecopilot task create --name="完成文档"` - 创建新任务
- `vibecopilot check --status` - 检查项目状态
